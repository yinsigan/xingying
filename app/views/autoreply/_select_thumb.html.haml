.modal-header
  %button.close{"data-dismiss" => "modal", :type => "button"}
    %span{"aria-hidden" => "true"} &times;
    %span.sr-only Close
  %h4#mymodal.modal-title= t('.select_btn')
.modal-body
  .row
    .col-md-12.clearfix
      #picture_upload_form
        .pull-right
          = form_tag upload_public_account_path(@public_account), method: "post", class: "picture_upload" do
            = file_field_tag "image", :class => "filestyle", :data => {:buttonText => t('upload'), :input => false, :badge => false, :buttonBefore => false, :buttonName => "btn btn-primary"}, id: "upload"
        .pull-right.marginright20
          %p.help-block
            = t('picture_upload_tip')
          = render "shared/progress"
  .row.margintop20
    .col-md-12.clearfix
      .tabbable-panel
        .tabbable-line
          %ul.nav.nav-tabs#group{role: "tablist"}
            %li{class: current_page?(select_thumb_material_public_account_path(@public_account)) ? "active" : nil}
              = link_to select_thumb_material_public_account_path(@public_account), remote: true do
                = t('.no_group')
                %em.num
                  (#{@no_group_count})
            = render partial: "autoreply/thumb_group", collection: @thumb_groups unless @thumb_groups.empty?
  - if @thumbs.empty?
    .bs-callout.bs-callout-default
      %h4= t('.no_content')
  - else
    .row
      .pic_content.col-md-12.margintop20
        = render partial: "thumbs/thumb", collection: @thumbs, locals: {thumb_col: "col-md-3"}
    .row
      .col-md-12.text-right#page
        = paginate @thumbs, remote: true

.modal-footer
  %button{type: "button", class: "btn btn-primary disabled", id: "select_btn"}= t('sure')
  %button{type: "button", class: "btn btn-default", "data-dismiss" => "modal"}
    = t('close')

:javascript
  $(document).ready(function() {
    $("#thumb_content").on('click', ".sin_box", function() {
      $(this).toggleClass("selected");
      $(this).siblings().removeClass("selected");
      if($(this).hasClass("selected")) {
        $("#select_btn").removeClass("disabled");
      } else {
        $("#select_btn").addClass("disabled");
      }
    })
  })

  // 更新预览图
  $("#select_btn").on('click', function() {
    var img = $('.selected').find('img');
    $("#edit_sin_preview .thumb .default").hide();
    if ($("#edit_sin_preview .thumb").find("img").size() > 0) {
      $("#edit_sin_preview .thumb").find("img").remove();
    }
    $("#edit_sin_preview .thumb").prepend(img.height("240px").width("240px"));
    $("#sin_material_sin_pic_text_attributes_thumb_id").val($(".selected").attr("id"));
    $("#modal").modal('hide');
  });


  filestyle();

  picture_upload();

  my_icheck('.icheck-me');
