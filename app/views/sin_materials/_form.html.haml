#edit_sin.col-md-8.edit_sin_pic_text
  .inner.well.clearfix
    = form_for [@public_account, @sin_material], html: { role: "form", "data-bv-feedbackicons-valid" => "glyphicon glyphicon-ok", "data-bv-feedbackicons-invalid" => "glyphicon glyphicon-remove", "data-bv-feedbackicons-validating" => "glyphicon glyphicon-refresh" } do |f|
      = render partial: "shared/form_error_messages", locals: {object: @sin_material}
      = f.fields_for :sin_pic_text, @sin_pic_text do |sin_pic_text|
        .form-group.padding-content
          = sin_pic_text.label :title, class: "col-sm-12 control-label required font-normal"
          .col-sm-12
            = sin_pic_text.text_field :title, class: "form-control", required: true, "data-bv-stringlength" => "true", "data-bv-stringlength-max" => 64
        .form-group.padding-content
          = label_tag "thumb_image", t('activerecord.attributes.sin_pic_text.thumb'), class: "col-sm-12 control-label font-normal required"
          .col-sm-12.clearfix
            .pull-left.marginright10
              = file_field_tag "image", "data-url" => public_account_thumbs_path(@public_account), "data-progress" => "progress_div", :class => "filestyle", "data-buttonText" => t('choose_picture'), "data-buttonBefore" => true, "data-input" => false
            .pull-left
              = link_to t('.select_btn'), select_thumb_material_public_account_path(@public_account), class: "btn btn-default", remote: true
            .clearfix
            = sin_pic_text.hidden_field :thumb_id
            = render "shared/progress"

            #image_preview.imagePreview
        .form-group.padding-content
          = sin_pic_text.label :desc, class: "col-sm-12 control-label font-normal required"
          .col-sm-12
            = sin_pic_text.text_area :desc, class: "form-control", rows: 5, required: true, "data-bv-stringlength" => "true", "data-bv-stringlength-max" => 120
        .form-group.padding-content
          = sin_pic_text.label :body, class: "col-sm-12 control-label required font-normal"
          .col-sm-12
            %script#sin_material_sin_pic_text_attributes_body{:name => "sin_material[sin_pic_text_attributes][body]", :type => "text/plain", required: true}
            :javascript
              $(document).on("page:change", function() {
                var ue = UE.getEditor('sin_material_sin_pic_text_attributes_body', {
                  initialFrameHeight: 400,
                  saveInterval: 100000,
                  wordCount: false,
                  elementPathEnabled: false,
                  serverUrl: "",
                  toolbars: [
                      ['fullscreen', 'source', 'bold', 'italic', 'underline', 'formatmatch', 'blockquote',
                      'removeformat', 'fontfamily', 'fontsize', 'insertimage', 'edittable',
                      'link', 'emotion', 'map', 'insertvideo', 'justifyleft', 'justifyright', 'justifycenter',
                      'justifyjustify', 'forecolor', 'insertorderedlist', 'insertunorderedlist',
                      'wordimage', 'background', 'template', 'inserttable', 'horizontal', 'music',
                      'rowspacingtop', 'rowspacingbottom', 'lineheight', 'autotypeset']
                  ]
                });
                ue.ready(function() {
                  ue.setContent("#{@sin_pic_text.try(:body)}")
                })
              })
        .col-sm-12
          = f.submit "#{t('save')}", class: "btn btn-primary", "data-disable-with" => "#{t('disable-with-save')}"
    %i.arrow_out
    %i.arrow_in
