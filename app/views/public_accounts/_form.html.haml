%div
  %a.pull-right.need-help.btn.btn-info
    %i.fa.fa-question
      = t('need-help')
= form_for @public_account, html: {class: "form-horizontal"} do |f|
  = render partial: "shared/form_error_messages", locals: {object: @public_account}
  .form-group.boot-tour{"data-bootstro-title" => t('public_account.form.name.title'), "data-bootstro-content" => t('public_account.form.name.content'), "data-bootstro-placement" => "left" , "data-bootstro-width" => "400px",  "data-bootstro-step" => t('public_account.form.name.step')}
    = f.label :name, class: "col-sm-3 control-label required"
    .col-sm-6
      = f.text_field :name, class: "form-control", required: true, autofocus: true
  .form-group
    = f.label :tp, class: "col-sm-3 control-label required"
    .col-sm-6
      = f.select :tp, options_for_select(PublicAccount::TP.invert, @public_account.tp.presence), {include_blank: t('please_select')}, {:class => "form-control", required: true}
  .form-group.boot-tour{"data-bootstro-title" => t('public_account.form.appid.title'), "data-bootstro-content" => t('public_account.form.appid.content'), "data-bootstro-placement" => "left" , "data-bootstro-width" => "400px",  "data-bootstro-step" => t('public_account.form.appid.step')}
    = f.label :appid, class: "col-sm-3 control-label"
    .col-sm-6
      = f.text_field :appid, class: "form-control", autofocus: true, placeholder: t('.appid_tip')
  .form-group.boot-tour{"data-bootstro-title" => t('public_account.form.appsecret.title'), "data-bootstro-content" => t('public_account.form.appsecret.content'), "data-bootstro-placement" => "left" , "data-bootstro-width" => "400px",  "data-bootstro-step" => t('public_account.form.appsecret.step')}
    = f.label :appsecret, class: "col-sm-3 control-label"
    .col-sm-6
      = f.text_field :appsecret, class: "form-control", autofocus: true, placeholder: t('.appsecret_tip')
  .form-group
    = f.label :image, class: "col-sm-3 control-label required"
    .col-sm-6
      .imagePreview
        - unless @public_account.new_record?
          = image_tag @public_account.image_url(:thumb).to_s
      = f.file_field :image, class: "form-control", onchange: "previewImage(this, [256], 4);", :class => "filestyle", "data-buttonText" => t('choose_picture'), "data-buttonBefore" => true, "data-input" => false, required: (@public_account.new_record? ? true : false)
  .form-group.boot-tour{"data-bootstro-title" => t('public_account.form.save.title'), "data-bootstro-content" => t('public_account.form.save.content'), "data-bootstro-placement" => "left" , "data-bootstro-width" => "400px",  "data-bootstro-step" => t('public_account.form.save.step')}
    .col-sm-6.col-sm-push-3
      = f.submit t('save'), class: "btn btn-primary", "data-disable-with" => t('disable-with-save')


:javascript
  $(function(){
    $(".need-help").click(function(){
      bootstro.start(".boot-tour", {
        placement: "left",
        prevButtonText: "#{I18n.t("prevStep")}",
        nextButtonText: "#{I18n.t("nextStep")}",
        finishButtonText: "#{I18n.t("finish")}"
      });
    });
  });
